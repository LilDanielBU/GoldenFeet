# --- Nombre ---
spring.application.name=GoldenFeets

# --- DATASOURCE (CORREGIDO PARA RAILWAY Y LOCAL) ---
# Usamos variables de entorno. Si no existen (como en tu PC), usa los valores por defecto.
spring.datasource.url=jdbc:mysql://${MYSQLHOST:localhost}:${MYSQLPORT:3306}/${MYSQLDATABASE:goldenfeets_db}?serverTimezone=UTC&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=${MYSQLUSER:root}
spring.datasource.password=${MYSQLPASSWORD:1234}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# --- JPA ---
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# --- Seguridad ---
# NOTA: En producción idealmente esto también debería ser una variable de entorno
application.security.jwt.secret-key=12345678901234567890123456789012
application.security.jwt.expiration=86400000

# --- Almacenamiento ---
# NOTA IMPORTANTE: En Railway, '/tmp' se borra cada vez que reinicias la app.
# Para persistencia real necesitas un servicio como AWS S3 o un volumen (Railway Volumes).
storage.location=/tmp/goldenfeet-uploads/
admin.default.email=admin@goldenfeet.com
admin.default.password=admin1234

# VARIABLES DE ENTORNO (Configúralas en IntelliJ/Railway)
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}

spring.mail.properties.mail.smtp.auth=true
# Usamos SSL (Puerto 465) en lugar de STARTTLS para evitar bloqueos de red
spring.mail.properties.mail.smtp.starttls.enable=false
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Timeouts para evitar que la app se congele si Gmail no responde
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000