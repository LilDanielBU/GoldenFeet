# --- Nombre ---
spring.application.name=GoldenFeets

# --- DATASOURCE (CORREGIDO PARA RAILWAY Y LOCAL) ---
# Usamos variables de entorno. Si no existen (como en tu PC), usa los valores por defecto.
spring.datasource.url=jdbc:mysql://${MYSQLHOST:localhost}:${MYSQLPORT:3306}/${MYSQLDATABASE:goldenfeets_db}?serverTimezone=UTC&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=${MYSQLUSER:root}
spring.datasource.password=${MYSQLPASSWORD:1234}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# --- JPA ---
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# --- Seguridad ---
# NOTA: En producción idealmente esto también debería ser una variable de entorno
application.security.jwt.secret-key=12345678901234567890123456789012
application.security.jwt.expiration=86400000

# --- Almacenamiento ---
# NOTA IMPORTANTE: En Railway, '/tmp' se borra cada vez que reinicias la app.
# Para persistencia real necesitas un servicio como AWS S3 o un volumen (Railway Volumes).
storage.location=/tmp/goldenfeet-uploads/
admin.default.email=admin@goldenfeet.com
admin.default.password=admin1234

# --- EMAIL CONFIG (CORREGIDO PARA GOLDEN FEETS EN RAILWAY) ---
spring.mail.host=smtp.gmail.com
spring.mail.port=465
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.protocol=smtps

# Forzamos SMTPS (SSL Seguro)
spring.mail.properties.mail.transport.protocol=smtps
spring.mail.properties.mail.smtps.auth=true
spring.mail.properties.mail.smtps.starttls.enable=true
spring.mail.properties.mail.smtps.ssl.trust=smtp.gmail.com

# TIMEOUTS AUMENTADOS (La clave para arreglar el bug)
# Subimos de 5000 a 20000 (20 segundos) para dar tiempo a que Google responda
spring.mail.properties.mail.smtps.connectiontimeout=20000
spring.mail.properties.mail.smtps.timeout=20000
spring.mail.properties.mail.smtps.writetimeout=20000